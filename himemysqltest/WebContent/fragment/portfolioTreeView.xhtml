<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.org/schema/seam/taglib"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui">

  <h:form id="portTreeForm">

    <p:toolbar styleClass="contextBar">
      <p:toolbarGroup align="right">
        <h:commandLink id="expandMenu" value="" actionListener="#{portfolioBean.expandAll}" rendered="true">
          <p:graphicImage value="/img/primefaces/add.png" />
        </h:commandLink>
        <h:commandLink id="collapseMenu" value="" actionListener="#{portfolioBean.collapseAll}" rendered="true">
          <p:graphicImage value="/img/primefaces/minus.png" />
        </h:commandLink>
        
        <p:menuButton id="treeMenu" value="" styleClass="contextButton">
          <p:menuitem value="Select Hierarchies..." onclick="portDialog.show();" icon="ui-icon-document" />
          <p:separator />
          <p:menuitem value="Create Portfolio..." id="qqqa" icon="ui-icon-circle-plus" disabled="#{not identity.loggedIn}"/>
          <p:menuitem value="Change Portfolio..." id="qqqaa"  disabled="#{not identity.loggedIn}"/>
        </p:menuButton>
        <p:tooltip for="expandMenu"   showEffect="fade" value="#{messages.expandMenu}"  />
        <p:tooltip for="collapseMenu" showEffect="fade" value="#{messages.collapseMenu}"  />
        <p:tooltip for="treeMenu" showEffect="fade" value="#{messages.treeMenu}"  />
      </p:toolbarGroup>
    </p:toolbar>
    
    <p:contextMenu for="accoId:portfolioTree">
      <p:menuitem value="View Detail" id="qqqqq" icon="ui-icon-circle-plus" />
      <p:separator />
      <p:menuitem value="Select Hierarchies..." onclick="portDialog.show()" icon="ui-icon-document"   />
      <p:separator />
      <p:menuitem value="Create Portfolio..." id="qqq" icon="ui-icon-circle-plus" disabled="#{not identity.loggedIn}"  />
    </p:contextMenu>


    <p:accordionPanel id="accoId" value="#{messages.portfolio}" multiple="true">
      <p:tab id="zzzz" title="#{messages.hierarchy}">

        <p:growl id="messages" showDetail="true" />

        <p:tree id="portfolioTree" value="#{portfolioBean.portfolioRoot}" var="node" 
          selection="#{portfolioBean.selectedNode}"
          selectionMode="single" style="width:95%">

          <p:ajax event="select" listener="#{portfolioBean.onNodeSelect}" update="@(.ui-datatable)" />

          <p:treeNode expandedIcon="ui-icon-folder-open" collapsedIcon="ui-icon-folder-collapsed">
            <h:outputText value="#{node.portId}" />
          </p:treeNode>

        </p:tree>
      </p:tab>

      <p:tab title="#{messages.userDefined}" disabled="#{not identity.loggedIn}">
        <p:commandButton type="button" update="messages" value="AAA222" onclick="portListDialog3.show();" />
      </p:tab>

      <p:tab title="#{messages.virtual}" disabled="#{not identity.loggedIn}">
        <f:facet name="asdf" />
        <p:menubar>
          <p:menuitem value="aa" icon="ui-icon-disk">
          </p:menuitem>
        </p:menubar>
        <p:commandButton value="AAAa" />

      </p:tab>

    </p:accordionPanel>
  </h:form>
</ui:composition>