<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.org/schema/seam/taglib"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui">

  <h:form id="formLazyProducts">
    
    <p:dataTable id="datatableLazyProducts" 
      var="_product" value="#{lazyProducts}" widgetVar="lazyProductsTable"
      lazy="true"
      selectionMode="single" selection="#{productSelectAction.selectedProduct}" rowKey="#{_product.mvId}"
      emptyMessage="No Product found with given criteria" 
      resizableColumns="true" 
      sortMode="single" 
      paginator="true" 
      paginatorTemplate="{FirstPageLink} {PreviousPageLink} {JumpToPageDropdown} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" 
      paginatorPosition="bottom" 
      rows="15" 
      style="height : 100%; width :100%;">
      <p:ajax event="rowSelect" listener="#{productSelectAction.onRowSelect}"   
                   update="@(form) :tabViewProduct" />
      <!-- <p:ajax event="rowSelect" listener="#{productSelectAction.onRowSelect}"   
                   update=":tabViewProduct :tabViewProduct:linearProduct" /> -->
      <!-- <p:ajax event="rowSelect" listener="#{productSelectAction.onRowSelect}"   
                   update=":tabViewProduct :tabViewProduct:linearProduct :formPosition" /> -->                     
     <!--  <p:ajax event="rowSelect" listener="#{config.updateColumns()}"   
                   update=":tabViewProduct :tabViewProduct:linearProduct" />   -->
      
      <p:column id="colProductType" headerText="#{messages.productType}" sortBy="#{_product.mvType}"
        filterBy="#{_product.mvType}" filterMatchMode="contains" 
        filterOptions="#{productTypeOption}" >
        <h:outputText value="(#{_product.positions.size})#{_product.mvType}" />
      </p:column>
      
      <p:column id="colProductId" headerText="#{messages.productId}" sortBy="#{_product.mvId}"
        filterBy="#{_product.mvId}" filterMatchMode="contains" >
        <h:outputText value="#{_product.mvId}" />
      </p:column>

      <p:column id="colProductName" headerText="#{messages.productName}" sortBy="#{_product.mvName}"
       filterBy="#{_product.mvName}" filterMatchMode="contains" >
        <h:outputText value="#{_product.mvName}" />
      </p:column> 
      
      <!-- <p:column id="colPositionSize" headerText="#{messages.positionSize}">
        <h:outputText value="#{_product.positions.size}" />
      </p:column>  -->
     </p:dataTable> 
     
  </h:form>
</ui:composition>